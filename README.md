# UrlShorter üîó

–ü—Ä–æ—Å—Ç–æ–µ –∏ –±—ã—Å—Ç—Ä–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è –¥–ª–∏–Ω–Ω—ã—Ö URL –≤ –∫–æ—Ä–æ—Ç–∫–∏–µ —Å—Å—ã–ª–∫–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚ú® –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ URL –≤ 6-—Å–∏–º–≤–æ–ª—å–Ω—ã–π slug
- üöÄ –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π API –Ω–∞ FastAPI
- üóÑÔ∏è PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- üß™ –ü–æ–ª–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏
- üê≥ Docker Compose –¥–ª—è –ª–µ–≥–∫–æ–≥–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.12+
- Docker –∏ Docker Compose (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –í–∞—Ä–∏–∞–Ω—Ç 1: –° Docker Compose

```bash
# –ö–ª–æ–Ω–∏—Ä—É–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd UrlShorter

# –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ë–î
docker-compose up
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ `http://localhost:8000`

### –í–∞—Ä–∏–∞–Ω—Ç 2: –õ–æ–∫–∞–ª—å–Ω–æ

1. **–£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**

```bash
pip install -e .
```

–∏–ª–∏ —Å uv:

```bash
uv sync
```

2. **–ó–∞–ø—É—Å—Ç–∏ PostgreSQL** (—É–±–µ–¥–∏—Å—å, —á—Ç–æ –ë–î –∑–∞–ø—É—â–µ–Ω–∞ –Ω–∞ –ø–æ—Ä—Ç—É 5432)

```bash
# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π Docker –¥–ª—è —Ç–æ–ª—å–∫–æ –ë–î
docker run -d \
  -e POSTGRES_DB=postgres \
  -e POSTGRES_USER=postgres \
  -e POSTGRES_PASSWORD=postgres \
  -p 5432:5432 \
  postgres:17
```

3. **–ò—Å–ø—Ä–∞–≤—å –ø–æ—Ä—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è** –≤ `src/database/db.py`:

```python
# –ò–∑–º–µ–Ω–∏ —Å 6432 –Ω–∞ 5432
url="postgresql+asyncpg://postgres:postgres@localhost:5432/postgres"
```

4. **–ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä**

```bash
uvicorn src.main:app --reload
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ `http://localhost:8000`

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–æ–∫—Ä–∞—Ç–∏—Ç—å URL

```bash
curl -X POST http://localhost:8000/short_url \
  -H "Content-Type: application/json" \
  -d '{"user_url": "https://example.com/very/long/path"}'
```

–û—Ç–≤–µ—Ç:

```json
{
  "data": "aBcDeF"
}
```

### –û—Ç–∫—Ä—ã—Ç—å —Å–æ–∫—Ä–∞—â–µ–Ω–Ω—ã–π URL

```
http://localhost:8000/aBcDeF
```

–†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π URL.

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
pytest
```

–∏–ª–∏ —Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å—é:

```bash
pytest -v
```

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

–û—Ç–∫—Ä–æ–π `index.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API.

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
UrlShorter/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ main.py              # FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ service.py           # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ shortener.py         # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è slug'–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ exceptions.py        # –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ database/
‚îÇ       ‚îú‚îÄ‚îÄ models.py        # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ       ‚îú‚îÄ‚îÄ crud.py          # –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î
‚îÇ       ‚îî‚îÄ‚îÄ db.py            # –ö–æ–Ω—Ñ–∏–≥ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ tests/                   # –¢–µ—Å—Ç—ã pytest
‚îú‚îÄ‚îÄ index.html               # –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ docker-compose.yaml      # –ö–æ–Ω—Ñ–∏–≥ Docker
‚îú‚îÄ‚îÄ pyproject.toml           # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îî‚îÄ‚îÄ pytest.ini               # –ö–æ–Ω—Ñ–∏–≥ —Ç–µ—Å—Ç–æ–≤
```

## API Endpoints

| –ú–µ—Ç–æ–¥ | Endpoint     | –û–ø–∏—Å–∞–Ω–∏–µ                     |
| ----- | ------------ | ---------------------------- |
| POST  | `/short_url` | –°–æ–∫—Ä–∞—Ç–∏—Ç—å URL                |
| GET   | `/{slug}`    | –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π URL |

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∂–µ—Å—Ç–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –∫–æ–¥–µ. –î–ª—è production —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ `.env`:

```
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/postgres
ALLOWED_ORIGINS=http://localhost:5500
```

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **Backend**: FastAPI, SQLAlchemy, asyncpg
- **–ë–î**: PostgreSQL
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: pytest, pytest-asyncio
- **–°–µ—Ä–≤–µ—Ä**: Uvicorn

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
